---
title: 'Session 1: Prepare your computer for R'
author: "Cassandra Buzby & Yen-Chung Chen"
date: "6/15/2021"
output: 
  html_document: 
    toc: yes
    code_folding: show
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

> Adpated from material curated by Eugene Plavskin and Grace Avecilla

- [Go back to syllabus](index.html)
- [Go back to worksheet](session_1_environment.html)
- [The slide deck for the session](slide/session_1_environment.ppt)


## What do you want to do with R?

- Whatever you do with Excel
- [Automate repetitive tasks](https://github.com/chenyenchung/LightCylcer480-Plot)
- Allowing the use of larger dataset for you & others
  - [Allow you to work with big datasets like sequencing results](https://satijalab.org/seurat/articles/get_started.html)
  - [Provide a quick and dirty way for your peer to browse data](https://yc-chen.shinyapps.io/JACbrowse/)

## Preparing your computer for R

### Download R

R is freely available at [Comprehensive R Archive Network](https://cran.r-project.org). Please download the file corresponding to your operating system and install it.

Since R is a very extensible tool, it works with other programs under the table. To provide it with those:

#### Mac users

Please search for `terminal` in your `launchpad` (F4), and enter ``xcode-select --install` in the terminal.

#### Windows users

Please go to [Rtools](https://cran.r-project.org/bin/windows/Rtools/) to download and install it. There are a couple of commands provided in the link that you will need to make things work properly.

### Download RStudio

Programming could sound intimidating, but a well-designed interface can make things much easier. RStudio is among those kind of tools and helps us navigate and manage R. Please download and install RStudio Desktop from [the official website](https://www.rstudio.com/products/rstudio/).

## Exploring RStudio

- The console: Where you run commands one by one
- The environment: Where you can see what is loaded in R
- The file explorer: An easier way for you to find files (otherwise you'll need to know the _path_ of a file to use it in R)

## Installing _packages_

- Packages are like kits in experiments: They _package_ the reagents and instructions for otherwise complicated processes for you.

- We'll be installing 3 packages today
  - [rmarkdown](https://rmarkdown.rstudio.com): A tool that allows you to write your code along with your notes
  - [ggplot2](https://ggplot2.tidyverse.org): A handy and powerful visualization tool
  - [dplyr](https://dplyr.tidyverse.org): A tool that handles and summarizes tables
  
```{r eval = FALSE}
install.packages("rmakrdown")
```


### Let's install `ggplot2` and `dplyr` too!

```{r eval = FALSE}
install.packages("ggplot2")
```

```{r eval = FALSE}
install.packages("dplyr")
```

  
## Using Rmarkdown

### Text and code

This is a line of text:

"I know how to use R!"

This is how code looks like in R:

![An example code chunk](img/codechunk.png)

```{r}
# And the output will be shown below
print("I know how to use R")
```


- Running code:
 - Click on the run button on the upper-right corner of a chunk
 - Ctrl + Enter (Windows) / Cmd + Return (Mac)
 
- Generating output
  - Click the *knit* button on the upper rim of the editor
  - Knitting will re-run your whole file, which is a good thing because it makes sure:
    - The code works on its own
    - We haven't accidentally deleted or added some lines of code that will break the code.

## Basic usage of R: Using it as a calculator

Enter the following line of command in the console

```{r}
17 + 2.3
```

In programming, division is often written as slashes (`/`), while multiplication is written as asterisks (`*`). Now, let's try doing these in the console as well:

- Try multiplying 8 by 7

```{r}
8 * 7
```


- Try dividing 4589 by 124

```{r}
4589 / 124
```


- Yen is 6'1 and 187 lbs, what is his BMI?
  - The formulat for BMI is $\frac{Weight (kg)}{Height^2(m)}$

```{r}
# Calculating height in inches
(6 * 12) + 1
```

```{r}
# Calculating height in cm
73 * 2.54 / 100
```

```{r}
# Calculating weight in kg
187 * 0.454
```

```{r}
# Calculate BMI
84.898 / (1.8542 * 1.8542)
```


### You might want to ask:

- Do I really have to manually type the number of inches to the next line of code that get me centimeters?
- To get the square of height, do I need to time it to itself?

The answer to both is no. You will learn to do things in a more elegant way on Thursday. For example:

```{r}
height_in <- (6 * 12) + 1
weight_lbs <- 187
height_m <- height_in * 2.54 / 100
weight_kg <- weight_lbs * 0.454

bmi <- weight_kg / (height_m ^ 2)
print(bmi)

```


## Things that are good to know

- There could be minor differences between versions, so it's a good habit to keep a record of the versions of R and the packages that you use to make sure the future you (and other people) can replicate your current work.
- The upper-right quadrant of RStudio has a _History_ tab, you can find and copy the commands that you used recently from there.
- Pressing tab will trigger RStudio to show possible autocompletion of things that start with the thing that you have typed (commands, variables, and paths).
- Putting a question mark before a command/function will trigger Rstudio to show it's usage in the _Help_ tab in the lower right quadrant. While it's pretty verbose, it's also pretty comprehensive.
- You can usually Google your way out and find some code that will do the thing you want especially in forums like [Stackoverflow](https://stackoverflow.com/).
- There's a downward arrow on the right of the Knit button. Besides a webpage, you can also knit into a PDF file, which requires another package called [`tinytex`](https://yihui.org/tinytex/). The installation can sometimes be problematic, but there's usually solutions you can find on the internet and we can always discuss if you want to try.