---
title: 'Session 1: Prepare your computer for R'
author: "Cassandra Buzby & Yen-Chung Chen"
date: "6/15/2021"
output: 
  html_document: 
    toc: yes
    code_folding: show
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

> Adpated from material curated by Eugene Plavskin and Grace Avecilla

- [Go back to syllabus](index.html)
- [The slide deck for the session](slide/session_1_environment.ppt)
- [Link to this worksheet](https://raw.githubusercontent.com/nyusurp/nyusurp.github.io/master/source/worksheet/session_1_environment.Rmd)
- [Solution to this worksheet](source/solution/session_1_environment.html)

## What do you want to do with R?

- Whatever you do with Excel
- [Automate repetitive tasks](https://github.com/chenyenchung/LightCylcer480-Plot)
- Allowing the use of larger dataset for you & others
  - [Allow you to work with big datasets like sequencing results](https://satijalab.org/seurat/articles/get_started.html)
  - [Provide a quick and dirty way for your peer to browse data](https://yc-chen.shinyapps.io/JACbrowse/)

## Preparing your computer for R

### Download R

R is freely available at [Comprehensive R Archive Network](https://cran.r-project.org). Please download the file corresponding to your operating system and install it.

Since R is a very extensible tool, it works with other programs under the table. To provide it with those:

#### Mac users

Please search for `terminal` in your `launchpad` (F4), and enter ``xcode-select --install` in the terminal.

#### Windows users

Please go to [Rtools](https://cran.r-project.org/bin/windows/Rtools/) to download and install it. There are a couple of commands provided in the link that you will need to make things work properly.

### Download RStudio

Programming could sound intimidating, but a well-designed interface can make things much easier. RStudio is among those kind of tools and helps us navigate and manage R. Please download and install RStudio Desktop from [the official website](https://www.rstudio.com/products/rstudio/).

## Exploring RStudio

- The console: Where you run commands one by one
- The environment: Where you can see what is loaded in R
- The file explorer: An easier way for you to find files (otherwise you'll need to know the _path_ of a file to use it in R)

## Installing _packages_

- Packages are like kits in experiments: They _package_ the reagents and instructions for otherwise complicated processes for you.

- We'll be installing 3 packages today
  - [rmarkdown](https://rmarkdown.rstudio.com): A tool that allows you to write your code along with your notes
  - [ggplot2](https://ggplot2.tidyverse.org): A handy and powerful visualization tool
  - [dplyr](https://dplyr.tidyverse.org): A tool that handles and summarizes tables
  
```{r eval = FALSE}
install.packages("rmarkdown")
```


### Let's install `ggplot2` and `dplyr` too!

```{r eval = FALSE}
# In the code chunks, any line that starts with a hashtag will NOT be executed.
# These lines become comments, and it's a good practice to thoroughly comment your code.
# Try to include the following information in your comments:
# The purpose of this part of code: Try to digest what you want to do into small steps and solve one step at a time with a piece of code.
# The expected input of this part of code: Should it be relative expression level? Should it be membrane potential? In what format should it be provided?
# The expected output of this part of code: What is the part of code providing? Is it generating a plot? Or is it calculating some sort of complicated score?

# The function for installing packages is install.packages().
# Remove the hashtag to un-comment the following line and complete the code to install ggplot2.

# install.packages()
```

```{r eval = FALSE}
# install.packages()
```

## Working directory and Rstudio projects

### What is a working directory?

While we usually explore the file system with a point-and-click file manager, how files are organized under the table is somewhat complicated, and when you need access a file, you will need a precise address of it, or in programming terms _file path_.

A path could be either absolute (consider a full address) or relative (e.g., if you know which _building_ (= reference point) we are talking about, 10th floor is not ambiguous). The _working directory_ is the _default reference point_ where R (or other computational tools) will use for its relative paths.

In other words, if you want to load a file, say it's called `data.txt`. If you don't specify the full path, R will go to your working directory to see if it can find `data.txt`.

### Checking and setting your working directory

You can check the path of your working directory with `getwd()` (short for _get working directory_)

```{r}
getwd()
```

To set your working directory, you can:

1. Go to the file tab in the bottom-right panel in RStudio. Navigate the the folder which you want it to be your working directory, click the _More_ button, and click _Set as working directory_.

2. Use `setwd()`. The syntax is `setwd("[path to your desired working directory])` (Square brackets just imply the part you need to replace with what you want. You don't need the square brackets in your real code.)

```{r}
# Set working directory to desktop for a Mac
# ~ (the tilde symbol is a shorthand for the home directory, which is where an operating system puts all your stuff)
setwd("~/Desktop/")
```


### RStudio projects

Working directory is an important concept, but it could be pretty tedious to set it manually everytime. RStudio comes with a convenient feature that help us to deal with this: Projects.

You can create a project by clicking the _Create a project_ button on the toolbar (second to the left).

If you already have a folder that you've used as your working directory, select _Existing directory_ when creating your project, and navigate to your desired folder; if you want to start from an empty folder, select _New directory_, and navigate to the folder where you want to create a new folder.

Most programming languages does not work well with spaces, so when you name your folders and files, try to replace spaces with underscores (`_`).

You can find a video illustration of how to create a project [here](https://www.youtube.com/watch?v=wqOme7xsZvs).
  
## Using Rmarkdown

### Text and code

This is a line of text:

"I know how to use R!"


```{r}
# This is a chunk of code
# And the output will be shown below
print("I know how to use R")
```


- Running code:
 - Click on the run button on the upper-right corner of a chunk
 - Ctrl + Enter (Windows) / Cmd + Return (Mac)
 
- Generating output
  - Click the *knit* button on the upper rim of the editor
  - Knitting will re-run your whole file, which is a good thing because it makes sure:
    - The code works on its own
    - We haven't accidentally deleted or added some lines of code that will break the code.

## Basic usage of R: Using it as a calculator

Enter the following line of command in the console

```{r}
17 + 2.3
```

In programming, division is often written as slashes (`/`), while multiplication is written as asterisks (`*`). Now, let's try doing these in the console as well:


```{r}
# Try multiplying 8 by 7
```


```{r}
# Try dividing 4589 by 124
```


- Yen is 6'1 and 187 lbs, what is his BMI?
  - The formula for BMI is:
  
  $$\frac{Weight (kg)}{Height^2(m)}$$

```{r}
# Calculating height in inches
```

```{r}
# Calculating height in cm
```

```{r}
# Calculating weight in kg
```

```{r}
# Calculate BMI
```


### You might want to ask:

- Do I really have to manually type the number of inches to the next line of code that get me centimeters?
- To get the square of height, do I need to time it to itself?

The answer to both is no. You will learn to do things in a more elegant way on Thursday. You can take a glimpse of what it would look like in the solution sheet.


## Things that are good to know

- There could be minor differences between versions, so it's a good habit to keep a record of the versions of R and the packages that you use to make sure the future you (and other people) can replicate your current work.
- The upper-right quadrant of RStudio has a _History_ tab, you can find and copy the commands that you used recently from there.
- Pressing tab will trigger RStudio to show possible autocompletion of things that start with the thing that you have typed (commands, variables, and paths).
- Putting a question mark before a command/function will trigger Rstudio to show it's usage in the _Help_ tab in the lower right quadrant. While it's pretty verbose, it's also pretty comprehensive.
- You can usually Google your way out and find some code that will do the thing you want especially in forums like [Stackoverflow](https://stackoverflow.com/).
- There's a downward arrow on the right of the Knit button. Besides a webpage, you can also knit into a PDF file, which requires another package called [`tinytex`](https://yihui.org/tinytex/). The installation can sometimes be problematic, but there's usually solutions you can find on the internet and we can always discuss if you want to try.